(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{361:function(t,e,a){t.exports=a.p+"assets/img/1.062108c4.jpg"},362:function(t,e,a){t.exports=a.p+"assets/img/2.9e9cdeb2.jpg"},363:function(t,e,a){t.exports=a.p+"assets/img/3.6a0562b9.jpg"},364:function(t,e,a){t.exports=a.p+"assets/img/4.138e6f32.jpg"},365:function(t,e,a){t.exports=a.p+"assets/img/5.e1dfaba3.jpg"},366:function(t,e,a){t.exports=a.p+"assets/img/6.b7b77b29.jpg"},381:function(t,e,a){"use strict";a.r(e);var s=a(42),v=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),s("p",[t._v("在写这篇文章的时候，之前有看过一大堆性能优化的文章，对的，每次看到别人写的好的博客最终的归宿不是脑子🧠，而是收藏夹📖，也就导致于当我真正遇到性能问题的时候束手无策，我也真是理解了那句话"),s("code",[t._v("纸上得来终觉浅，绝知此事要躬行")]),t._v("。今天在跟测的时候，测试大哥就一直在吐槽，为什么你这新页面白屏这么的久，图片这里渲染的这么的慢，为什么感觉这动画一卡一卡的......真的那一刻我快被问成了十万个为什么了，这时我打开了尘封已久的收藏夹阅读了起来......")]),t._v(" "),s("h2",{attrs:{id:"走进lighthouse"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#走进lighthouse"}},[t._v("#")]),t._v(" 走进Lighthouse")]),t._v(" "),s("p",[t._v("根据我的收藏夹中的文章显示，我的谷歌浏览器就能进行H5页面性能的分析，我可真是太开心了，我就喜欢这种0配置0代码的傻瓜教程。")]),t._v(" "),s("blockquote",[s("p",[t._v("版本高的Google浏览器自带了lighthouse，无需进行其他的操作")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(361),alt:""}})]),t._v(" "),s("p",[s("code",[t._v("Categoies（分类）")]),t._v("里面包括了"),s("code",[t._v("Performance（性能）")]),t._v(","),s("code",[t._v("PWA")]),t._v(","),s("code",[t._v("Best practices(最佳实践)")]),t._v(","),s("code",[t._v("Accessibility(可访问性)")]),t._v(","),s("code",[t._v("SEO(搜索引擎优化)")]),t._v("。")]),t._v(" "),s("p",[s("code",[t._v("Device(设备)")]),t._v("也可以选择是"),s("code",[t._v("Mobile(手机)")]),t._v(","),s("code",[t._v("Desktop(桌面端设备)")]),t._v("。")]),t._v(" "),s("p",[t._v("既然我们是H5页面，那选择好"),s("code",[t._v("Mobile")]),t._v(",分类我们"),s("code",[t._v("没有使用PWA技术")]),t._v("，那么我们除了PWA之外全部勾选,最后点击"),s("code",[t._v("Generate report")]),t._v("生成最终的报告。")]),t._v(" "),s("h2",{attrs:{id:"性能指标分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#性能指标分析"}},[t._v("#")]),t._v(" 性能指标分析")]),t._v(" "),s("p",[t._v("这便是我们网页最终的报告，下图是各项指标的分数，下面根据更具体一些时间指标来衡量我们的性能。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(362),alt:"image.png"}})]),t._v(" "),s("p",[t._v("真的是只能淡淡说一句时代变了，原来衡量性能好坏有以下6个方面，我记得之前衡量一个页面的性能当初张口闭口就是白屏多少秒😂\n"),s("img",{attrs:{src:a(363),alt:"image.png"}})]),t._v(" "),s("h3",{attrs:{id:"fcp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fcp"}},[t._v("#")]),t._v(" FCP")]),t._v(" "),s("p",[s("code",[t._v("FCP(Fisrt Contentful Paint)")]),t._v("：这个指标用于记录页面首次绘制文本、图片、非空白 Canvas 或 SVG 的时间。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(364),alt:"image.png"}})]),t._v(" "),s("p",[t._v("举个例子说说，就是页面从白屏到出现出现一张图片或者一段文字的时间，当然其实很多时候页面要去请求接口拉取数据，如果网络比较慢的话肯定会白屏比较久，那么我们的其实可以在数据没加载前"),s("code",[t._v("放一个loading的图片")]),t._v(",告诉用户页面在加载中,从而"),s("code",[t._v("减少我们的FCP的时间")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"tti"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tti"}},[t._v("#")]),t._v(" TTI")]),t._v(" "),s("p",[s("code",[t._v("TTI(Time to Interactive)")]),t._v("：这个表示首次可交互可流畅的交互时间，这个时间有几个特点："),s("code",[t._v("位于FCP之后")]),t._v(","),s("code",[t._v("并且5秒内无长任务(大于50ms)的执行")]),t._v("。")]),t._v(" "),s("p",[t._v("其实这个指标和FCP一样都很重要，FCP可能意味着我们的页面开始渲染，即使渲染出页面不代表可以交互了，很多的时候我们的页面渲染出来了，但是会比较的卡顿。")]),t._v(" "),s("h3",{attrs:{id:"speed-index"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#speed-index"}},[t._v("#")]),t._v(" Speed Index")]),t._v(" "),s("p",[t._v("速度指数衡量的是内容在页面加载过程中的视觉显示速度。Lighthouse首先会在浏览器中捕获一段页面加载的视频，并计算出各帧之间的视觉进度。")]),t._v(" "),s("h3",{attrs:{id:"tbt"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbt"}},[t._v("#")]),t._v(" TBT")]),t._v(" "),s("p",[s("code",[t._v("TBT(Total Blocking Time)")]),t._v("：表示从FCP到TTI阶段中长任务总阻塞时间。")]),t._v(" "),s("p",[t._v("以下为web.dev官网对TBT所书写的例子：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(365),alt:"image.png"}}),t._v("\n上图表示主线程所做的任务时间线，其中任务分为长任务和短任务（长短任务的依据为执行时间是否大于50ms）。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(366),alt:"image.png"}})]),t._v(" "),s("p",[t._v("那么超过50ms的地方实际上就是阻塞时间，那上面实际上阻塞时间就是345ms。当然阻塞导致浏览器无法中断正在进行的任务，从而使得用户无法立即进行交互，从而影响体验。")]),t._v(" "),s("h3",{attrs:{id:"lcp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lcp"}},[t._v("#")]),t._v(" LCP")]),t._v(" "),s("p",[s("code",[t._v("LCP(Largest Contentful Paint)")]),t._v(":表示页面最大的内容绘制。该时间会随着页面渲染变化而变化，因为页面中的最大元素在渲染过程中可能会发生改变，另外该指标会在用户第一次交互后停止记录。")]),t._v(" "),s("h3",{attrs:{id:"cls"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cls"}},[t._v("#")]),t._v(" CLS")]),t._v(" "),s("p",[s("code",[t._v("CLS(Cumulative Layout Shift)")]),t._v("：表示页面累计位移偏移。页面内容的意外移动通常是由于异步加载资源或将DOM元素动态添加到现有内容上方的页面而发生的。")]),t._v(" "),s("p",[t._v("如果用户在使用页面的过程中点击一个按钮，然后页面生成一块内容，导致该内容下面的所有内容下移，这便是一次页面的位移。")]),t._v(" "),s("h2",{attrs:{id:"lighthouse的修改建议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lighthouse的修改建议"}},[t._v("#")]),t._v(" lighthouse的修改建议")]),t._v(" "),s("p",[s("code",[t._v("lighthouse的优点")]),t._v("不仅仅可以根据这些重要的指标给我们的页面打分，更重要的是lighthouse会给我们很多的优化建议，这就相当于老师既会给学生打分又会讲解错题，真是很爽，不然的话还得去网上一个一个自己找解决方法，而且很多时候自己还没有解决的方向。")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("下面是lighthouse给我们的一些"),s("strong",[t._v("建议")]),t._v(" "),s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/74bcad3a819b47ee9a93cc11d1b567e0~tplv-k3u1fbpfcp-watermark.image",alt:"image.png"}})])]),t._v(" "),s("li",[s("p",[t._v("下面是有关我们的项目对性能的"),s("strong",[t._v("诊断结果")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4addc3457eb44080a6e9cb53b44aa41f~tplv-k3u1fbpfcp-watermark.image",alt:"image.png"}})]),t._v(" "),s("p",[t._v("后续的话进行项目性能优化的详细实践。")])])}),[],!1,null,null,null);e.default=v.exports}}]);