<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>函数柯里化与函数组合 | Jackcaos’s Blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/JackcaosBlog/favicon.ico">
    <meta name="description" content="Do one thing at a time, and do well">
    
    <link rel="preload" href="/JackcaosBlog/assets/css/0.styles.0d892ae0.css" as="style"><link rel="preload" href="/JackcaosBlog/assets/js/app.19eda45b.js" as="script"><link rel="preload" href="/JackcaosBlog/assets/js/2.c6a4fc82.js" as="script"><link rel="preload" href="/JackcaosBlog/assets/js/11.136d9201.js" as="script"><link rel="prefetch" href="/JackcaosBlog/assets/js/10.8a368661.js"><link rel="prefetch" href="/JackcaosBlog/assets/js/3.400c521e.js"><link rel="prefetch" href="/JackcaosBlog/assets/js/4.b4f38d38.js"><link rel="prefetch" href="/JackcaosBlog/assets/js/5.8263e940.js"><link rel="prefetch" href="/JackcaosBlog/assets/js/6.b34fc80f.js"><link rel="prefetch" href="/JackcaosBlog/assets/js/7.2df0f8e4.js"><link rel="prefetch" href="/JackcaosBlog/assets/js/8.4229c75c.js"><link rel="prefetch" href="/JackcaosBlog/assets/js/9.f3ca1465.js">
    <link rel="stylesheet" href="/JackcaosBlog/assets/css/0.styles.0d892ae0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/JackcaosBlog/" class="home-link router-link-active"><!----> <span class="site-name">Jackcaos’s Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/JackcaosBlog/web-front/functional.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  前端基础
</a></div><div class="nav-item"><a href="/JackcaosBlog/react/tsreact.html" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/JackcaosBlog/vue.html" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/JackcaosBlog/engineering.html" class="nav-link">
  工程化
</a></div><div class="nav-item"><a href="/JackcaosBlog/node.html" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/JackcaosBlog/algorithm.html" class="nav-link">
  算法
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Jackcaos" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub地址
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/JackcaosBlog/web-front/functional.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  前端基础
</a></div><div class="nav-item"><a href="/JackcaosBlog/react/tsreact.html" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/JackcaosBlog/vue.html" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/JackcaosBlog/engineering.html" class="nav-link">
  工程化
</a></div><div class="nav-item"><a href="/JackcaosBlog/node.html" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/JackcaosBlog/algorithm.html" class="nav-link">
  算法
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Jackcaos" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub地址
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>函数式编程</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JackcaosBlog/web-front/functional.html" aria-current="page" class="active sidebar-link">函数柯里化与函数组合</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JackcaosBlog/web-front/functional.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/JackcaosBlog/web-front/functional.html#实现curry-柯里化-函数" class="sidebar-link">实现curry（柯里化）函数</a></li><li class="sidebar-sub-header"><a href="/JackcaosBlog/web-front/functional.html#柯里化的作用" class="sidebar-link">柯里化的作用</a></li><li class="sidebar-sub-header"><a href="/JackcaosBlog/web-front/functional.html#函数结合compose" class="sidebar-link">函数结合compose</a></li><li class="sidebar-sub-header"><a href="/JackcaosBlog/web-front/functional.html#实现一个compose" class="sidebar-link">实现一个compose</a></li><li class="sidebar-sub-header"><a href="/JackcaosBlog/web-front/functional.html#函数组合的好处" class="sidebar-link">函数组合的好处</a></li><li class="sidebar-sub-header"><a href="/JackcaosBlog/web-front/functional.html#结语" class="sidebar-link">结语</a></li></ul></li></ul></section></li><li><a href="/JackcaosBlog/web-front/lighthouse.html" class="sidebar-link">lighthouse性能分析</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>之前我们组来了一个工作5年的小伙伴来面试，因为组长临时有事情，就由我去负责面试者的笔试，笔试题里有这么一道题:<code>实现一个add函数，让add(2)(2)(3)返回7</code>，我看了下这个面试者的答案是这么写的：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> a<span class="token operator">+</span>b<span class="token operator">+</span>c
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// 7</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>（我只负责打印和收笔试题，不负责改，嘤嘤嘤），首先我们说他的答案，肯定是没错，运行出来结果确实是7，但是总觉得不够优美，有10个参数的话那估计写return都要写疯，如果我更换传参方式我希望你写一个函数<code>add(2,2)(3)返回7</code>，是不是又会写成下面这样呢？</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> a<span class="token operator">+</span>b<span class="token operator">+</span>c
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>如果把这题目换了一下传参方式就一定需要写出两个不同的add函数吗？当然如果我是面试官，肯定更希望你可以写出一个更具有通用性的<code>add函数</code>，更希望面试者去实现一个<code>curry函数</code>,然后封装一下<code>add函数</code>。</p> <h2 id="实现curry-柯里化-函数"><a href="#实现curry-柯里化-函数" class="header-anchor">#</a> 实现curry（柯里化）函数</h2> <p>其实我们看这位面试的同学写的代码其实已经大致给了我们一个写<code>curry</code>函数的方向🧭，既然是多个参数，那只要我们的参数数量是否达到我们函数需要的参数数量，若未达到我们就递归取获取后面传进来的参数，直到达到我们所需的参数个数即可。</p> <p>不卖关子了，那就直接写一个柯里化函数吧。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">curry</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 表示所需要参数的个数</span>
  <span class="token keyword">let</span> funcLen <span class="token operator">=</span> func<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">let</span> argsTemp <span class="token operator">=</span> args <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 由于参数是一个类数组不是真正的数组，这里需要转换一下</span>
    <span class="token keyword">let</span> _args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    _args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>argsTemp<span class="token punctuation">,</span> <span class="token operator">...</span>_args<span class="token punctuation">]</span>

    <span class="token comment">// 如果参数的数量还不足，则还需要递归收集参数</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>_args<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> funcLen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">curry</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> func<span class="token punctuation">,</span> _args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 收集完毕则执行func函数</span>
    <span class="token keyword">return</span> <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> _args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>调用<code>curry</code>函数：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> add <span class="token operator">=</span> <span class="token function">curry</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> a<span class="token operator">+</span>b<span class="token operator">+</span>c
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// 7</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// 7</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>至此我们就完成了这个具有通用性的<code>add函数</code>。</p> <p>如果上面的题目你实现了一个<code>curry函数</code>，我觉得会更让面试官眼前一亮，有时候面试官问的大部分题目大家肯定在各种网站都会有答案，比起把答案背下来，面试官肯定更希望你可以<code>深挖或者扩展</code>来谈谈，回答任何题目都是一千个读者一千个哈姆雷特，永远不会有一个唯一的答案。</p> <p>其实写到这里我自己也灌输了一个错误的定义,下面才是正确的理解:</p> <ul><li><code>add(2)(2)(3)</code>才是一个真正意义上的<code>柯里化</code></li> <li><code>add(2,2)(3)</code>实际上是一个<code>部分函数应用（Partial Function Application）</code></li></ul> <h3 id="柯里化和部分函数应用的区别"><a href="#柯里化和部分函数应用的区别" class="header-anchor">#</a> 柯里化和部分函数应用的区别</h3> <p>那么两者的区别是什么呢？</p> <p><code>柯里化</code>是一种将使用多个参数的一个函数转换成一系列使用<strong>一个参数</strong>的函数的技术，简单来说就是传参分成一个一个的参数。</p> <p><code>部分函数应用</code>是指<strong>固定一个函数的一些参数</strong>，然后产生另一个更小元的函数。</p> <h2 id="柯里化的作用"><a href="#柯里化的作用" class="header-anchor">#</a> 柯里化的作用</h2> <p>关于柯里化的作用，我们可以看一个例子：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 一个进行请求的函数</span>
<span class="token keyword">function</span> <span class="token function">ajax</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> url<span class="token punctuation">,</span> params</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
<span class="token comment">// 1.方式一</span>
<span class="token function">ajax</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'www.a.com'</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span>
<span class="token function">ajax</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'www.a.com'</span><span class="token punctuation">,</span> <span class="token number">789</span><span class="token punctuation">)</span>
<span class="token function">ajax</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'www.b.com'</span><span class="token punctuation">,</span> <span class="token number">456</span><span class="token punctuation">)</span>

<span class="token comment">// 2.方式二</span>
<span class="token keyword">var</span> get <span class="token operator">=</span> <span class="token function">ajax</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> getAUrl <span class="token operator">=</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'www.a.com'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> getBUrl <span class="token operator">=</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'www.b.com'</span><span class="token punctuation">)</span>
<span class="token function">getAUrl</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
<span class="token function">getAUrl</span><span class="token punctuation">(</span><span class="token number">789</span><span class="token punctuation">)</span>
<span class="token function">getBUrl</span><span class="token punctuation">(</span><span class="token number">456</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>1.方式一这样的调用<code>ajax函数</code>，利用了ajax函数<code>通用性</code>，但是传参还是显得冗余。</p> <p>2.方式二未利用ajax的函数的通用性，而是拆成一块一块，让参数得以复用，虽降低了通用性但<code>提高了</code>函数的<code>适用性</code>。</p> <h2 id="函数结合compose"><a href="#函数结合compose" class="header-anchor">#</a> 函数结合compose</h2> <p>都谈到了柯里化了，那能不谈<code>函数结合</code>吗？毕竟<code>函数结合是函数式编程两员大将中的另一位大将</code>。</p> <p>函数组合顾名思义就是把<code>多个函数组合到一起</code>，比如</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">compose</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">f<span class="token punctuation">,</span>g</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token function">g</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>其实这个函数的执行顺序是<code>g(x)</code>-&gt;<code>f(x)</code>，也就是从右向左。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 满足结合律</span>
<span class="token function">compose</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> <span class="token function">compose</span><span class="token punctuation">(</span>g<span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token function">compose</span><span class="token punctuation">(</span><span class="token function">compose</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> g<span class="token punctuation">)</span><span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="实现一个compose"><a href="#实现一个compose" class="header-anchor">#</a> 实现一个compose</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">compose</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>func</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> func<span class="token punctuation">.</span><span class="token function">reduceRight</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">typeof</span> acc <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">?</span> <span class="token function">cur</span><span class="token punctuation">(</span><span class="token function">acc</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">cur</span><span class="token punctuation">(</span>acc<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 用ES6写法</span>
<span class="token keyword">const</span> <span class="token function-variable function">compose</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>func</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> func<span class="token punctuation">.</span><span class="token function">reduceRight</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">typeof</span> acc <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">?</span> <span class="token function">cur</span><span class="token punctuation">(</span><span class="token function">acc</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">cur</span><span class="token punctuation">(</span>acc<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>测试：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">x</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> x<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">y</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> x<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">z</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> x<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">c</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>执行顺序为<code>z-&gt;y-&gt;x</code></p> <h2 id="函数组合的好处"><a href="#函数组合的好处" class="header-anchor">#</a> 函数组合的好处</h2> <p>那我们用一个函数组合有什么好处呢？</p> <p>我们现在要把一个字符串数组进行<strong>逆序处理</strong>，然后全部进行<strong>大写处理</strong>，最终<strong>输出一个字符串</strong>。</p> <p>常规的命令式的编程的写法：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token function">reverse</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>确实满足了我们的要求，但是这种无限嵌套的写法可读性真的不高，而且很不美观。</p> <p>函数组合的写法：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">compose</span><span class="token punctuation">(</span>log<span class="token punctuation">,</span> toString<span class="token punctuation">,</span> toUpperCase<span class="token punctuation">,</span> reverse<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>我们利用函数组合的写法，我们什么调用顺序一目了然，而且我们能进行各种各样的组合。</p> <p>只要我们将一些比较复杂的函数抽象成一个一个的<code>纯函数</code>，然后在不同场景将他们<code>任意组合</code>，就像是俄罗斯方块，虽然只有那么几种形状，但是拼起来可以搭建出各种不一样的形状。</p> <h2 id="结语"><a href="#结语" class="header-anchor">#</a> 结语</h2> <p>我们今天其实就是通过一道笔试题引出了一个函数式编程里面两个重要的理论（函数结合与柯里化），由于函数式编程的理论比较多，我推荐这篇文章（<a href="https://juejin.cn/post/6844903936378273799#heading-6" target="_blank" rel="noopener noreferrer">简明 JavaScript 函数式编程——入门篇<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）去理解理解函数式编程的概念。</p> <p>参考：</p> <p><a href="https://juejin.cn/post/6844903936378273799#heading-33" target="_blank" rel="noopener noreferrer">简明 JavaScript 函数式编程——入门篇<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://llh911001.gitbooks.io/mostly-adequate-guide-chinese/content/ch4.html#%E4%B8%8D%E4%BB%85%E4%BB%85%E6%98%AF%E5%8F%8C%E5%85%B3%E8%AF%AD%E5%92%96%E5%96%B1" target="_blank" rel="noopener noreferrer">函数编程指北<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://github.com/mqyqingfeng/Blog/issues/42" target="_blank" rel="noopener noreferrer">JavaScript专题之函数柯里化<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/11/2021, 1:54:33 PM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/JackcaosBlog/web-front/lighthouse.html">
        lighthouse性能分析
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/JackcaosBlog/assets/js/app.19eda45b.js" defer></script><script src="/JackcaosBlog/assets/js/2.c6a4fc82.js" defer></script><script src="/JackcaosBlog/assets/js/11.136d9201.js" defer></script>
  </body>
</html>
