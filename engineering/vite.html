<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端工程化的新星——Vite | Jackcaos’s Blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/JackcaosBlog/favicon.ico">
    <meta name="description" content="Do one thing at a time, and do well">
    
    <link rel="preload" href="/JackcaosBlog/assets/css/0.styles.f66641df.css" as="style"><link rel="preload" href="/JackcaosBlog/assets/js/app.f8f8a34a.js" as="script"><link rel="preload" href="/JackcaosBlog/assets/js/2.b30e03fa.js" as="script"><link rel="preload" href="/JackcaosBlog/assets/js/11.8c79a383.js" as="script"><link rel="prefetch" href="/JackcaosBlog/assets/js/10.2c09293e.js"><link rel="prefetch" href="/JackcaosBlog/assets/js/12.ae514001.js"><link rel="prefetch" href="/JackcaosBlog/assets/js/13.3a36b87b.js"><link rel="prefetch" href="/JackcaosBlog/assets/js/14.9e788fe7.js"><link rel="prefetch" href="/JackcaosBlog/assets/js/15.bae23799.js"><link rel="prefetch" href="/JackcaosBlog/assets/js/3.62bf7443.js"><link rel="prefetch" href="/JackcaosBlog/assets/js/4.cd49a0f0.js"><link rel="prefetch" href="/JackcaosBlog/assets/js/5.58411150.js"><link rel="prefetch" href="/JackcaosBlog/assets/js/6.7abbc901.js"><link rel="prefetch" href="/JackcaosBlog/assets/js/7.a404c475.js"><link rel="prefetch" href="/JackcaosBlog/assets/js/8.4d8f4382.js"><link rel="prefetch" href="/JackcaosBlog/assets/js/9.6054b180.js">
    <link rel="stylesheet" href="/JackcaosBlog/assets/css/0.styles.f66641df.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/JackcaosBlog/" class="home-link router-link-active"><!----> <span class="site-name">Jackcaos’s Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/JackcaosBlog/web-front/functional.html" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/JackcaosBlog/react/tsreact.html" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/JackcaosBlog/engineering/babelrc.html" class="nav-link">
  工程化
</a></div><div class="nav-item"><a href="/JackcaosBlog/node.html" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/JackcaosBlog/algorithm.html" class="nav-link">
  算法
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Jackcaos" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub地址
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/JackcaosBlog/web-front/functional.html" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/JackcaosBlog/react/tsreact.html" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/JackcaosBlog/engineering/babelrc.html" class="nav-link">
  工程化
</a></div><div class="nav-item"><a href="/JackcaosBlog/node.html" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/JackcaosBlog/algorithm.html" class="nav-link">
  算法
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Jackcaos" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub地址
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>babel</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>前端工程化的新星——Vite</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JackcaosBlog/engineering/vite.html" aria-current="page" class="active sidebar-link">前端工程化的新星——Vite</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JackcaosBlog/engineering/vite.html#宝藏vite" class="sidebar-link">宝藏Vite</a></li><li class="sidebar-sub-header"><a href="/JackcaosBlog/engineering/vite.html#vite的优点" class="sidebar-link">Vite的优点</a></li><li class="sidebar-sub-header"><a href="/JackcaosBlog/engineering/vite.html#预构建" class="sidebar-link">预构建</a></li><li class="sidebar-sub-header"><a href="/JackcaosBlog/engineering/vite.html#一些思考" class="sidebar-link">一些思考</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="宝藏vite"><a href="#宝藏vite" class="header-anchor">#</a> 宝藏Vite</h2> <p>当一个B端项目大到一定程度的时候，在开发环境改动一个东西，到页面重新渲染出来感觉过了一个世纪，webpack的痛就被无情的暴露了出来，而vite就像是这种大型项目的救星。</p> <h2 id="vite的优点"><a href="#vite的优点" class="header-anchor">#</a> Vite的优点</h2> <p>我们在Vite的官网实际上就可以发现它把自己的优势写在第一条（好像大部分的框架或者工具都是先介绍自己的优势的），接下来我们看看Vite的优势。</p> <ul><li><code>开发环境打包快</code>：
众所周知webpack是根据我们entry文件，然后根据模块的依赖情况，将所有的文件打包生成一个bundle，构建出一个强大的依赖树。由于打包的过程是静态，然后每次更改都会重新打包，随着项目增大，这个过程将变得十分漫长。</li></ul> <p>vite基于浏览器对ES Module的支持(即script标签可将type设置为module)，在需要加载某个模块时，Vite 只需要在浏览器请求源码时进行转换并按需提供源码即可，不需要和webpack一样提前将所有的模块打包。</p> <ul><li><code>快速预构建依赖</code>
vite是基于esbuild进行预构建的，速度会比普通的JS编写的打包器快很多。</li></ul> <p>除了上面两个优势，其还<code>内置了很多编译配置</code>，且其<code>支持多种框架</code>，无框架的限制。</p> <h2 id="预构建"><a href="#预构建" class="header-anchor">#</a> 预构建</h2> <p>在项目刚初始化，第一次启动时，命令行会出现一下信息：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Optimizable dependencies detected<span class="token operator">:</span> （侦测到可优化的依赖：）
react<span class="token punctuation">,</span> react<span class="token operator">-</span>dom
Pre<span class="token operator">-</span>bundling them to speed up dev server page load<span class="token operator">...</span><span class="token function">（将预构建它们以提升开发服务器页面加载速度）</span>
<span class="token punctuation">(</span><span class="token keyword">this</span> will be run only when your dependencies have changed<span class="token punctuation">)</span>（这将只会在你的依赖发生变化时执行）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>其主要考虑的是<strong>CommonJS 和 UMD 兼容性</strong>和<strong>减少页面请求</strong>两方面原因：</p> <ul><li><strong>CommonJS 和 UMD 兼容性:</strong>  开发阶段中，Vite 的开发服务器将所有代码视为原生 ES 模块。因此，Vite 必须先将作为 CommonJS 或 UMD 发布的依赖项转换为 ESM。</li> <li><strong>减少页面请求:</strong> 由于一些包将它们的 ES 模块构建作为许多单独的文件相互导入，则每引入一个模块都需要发送一个请求，大量请求会导致页面阻塞，所以vite在预构建阶段会根据ESM依赖关系将他们转为单个的模块，从而将多个请求合并为单个请求。</li></ul> <p>正是由于vite对依赖的预构建，在无依赖发生变化时，<code>二次启动速度会明显加快</code>。</p> <h2 id="一些思考"><a href="#一些思考" class="header-anchor">#</a> 一些思考</h2> <p>vite凭借<strong>基于Esbuild依赖出色的预构建能力</strong>，和其<strong>以ESM的形式提供源码方式</strong>，在开发环境下对大型的项目的构建速度比冷启动的webpack快不少。但是其生产环境是基于rollup进行打包，其实和我们的webpack区别不大（可能webpack更让人值得信赖）。并且生产环境更多考量的更多还是稳定性，而vite的开发环境与生产环境并不是用的同一个方式打包，不免让人有些担心。</p> <p>所以我觉得对于一些内部的CMS平台可以尝试的接入Vite,H5的话可以观望观望，毕竟一般H5项目代码量比CMS还是会少很多，开发环境下打包速度不至于特别慢，且H5可能更在意项目的稳定。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/25/2021, 4:25:37 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/JackcaosBlog/engineering/babelrc.html" class="prev">
        babelrc项目配置实践
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/JackcaosBlog/assets/js/app.f8f8a34a.js" defer></script><script src="/JackcaosBlog/assets/js/2.b30e03fa.js" defer></script><script src="/JackcaosBlog/assets/js/11.8c79a383.js" defer></script>
  </body>
</html>
